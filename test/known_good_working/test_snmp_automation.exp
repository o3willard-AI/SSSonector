#!/usr/bin/expect -f

# Test SNMP metrics through SSH key authentication
set timeout 30

# Get metrics via SNMP
spawn ssh snmp-server "snmpwalk -v2c -c public localhost .1.3.6.1.4.1.54321.1"

# No expect needed since we're using SSH key authentication

# Wait for completion
expect eof

# Test individual metrics
foreach oid {1 2 3 4 5} {
    spawn ssh snmp-server "snmpget -v2c -c public localhost .1.3.6.1.4.1.54321.1.$oid"
    expect eof
}

puts "\nSNMP Testing Complete"
exit 0
