[Unit]
Description=SSSonector Secure Tunnel Service
Documentation=https://github.com/o3willard-AI/SSSonector/docs
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
ExecStartPre=/bin/mkdir -p /var/log/sssonector /var/lib/sssonector /var/run/sssonector
ExecStartPre=/bin/chown -R sssonector:sssonector /var/log/sssonector /var/lib/sssonector /var/run/sssonector
ExecStartPre=/bin/chmod -R 755 /var/log/sssonector /var/lib/sssonector /var/run/sssonector
ExecStart=/usr/local/bin/sssonector -config /etc/sssonector/config.yaml
ExecReload=/bin/kill -HUP $MAINPID
Restart=on-failure
RestartSec=5s

User=sssonector
Group=sssonector
AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
PrivateTmp=true
ReadWritePaths=/var/lib/sssonector /var/run/sssonector /dev/net/tun /var/log/sssonector

# Resource limits
LimitNOFILE=65535
LimitNPROC=4096

[Install]
WantedBy=multi-user.target
